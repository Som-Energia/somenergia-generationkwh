projects:
  description: Projectes de Generació
  scripts:

    formatejaprevisions:
      title: Formateja arxius de previsió
      description: Formateja arxius de previsió
      script:
      - python
      - -c
      - celles='{celles}'; print ';'.join(x.replace(',', '.') for x in celles.split())
      parameters:
        celles:
          description: Enganxa les celles de l'Excel

    listplants:
      title: Llistat de plantes
      description: Mostra la definició de les plantes
      script: python SOME_SRC/somenergia-generationkwh/scripts/genkwh_plants.py list

    productionCurve:
      title: Corba de produccio
      description: |
        Genera corva de producció d'un comptador d'una planta
        - Fontivsolar: 501815908
        - Alcolea: 501600324
        - Matallana: 68308479
      script: python SOME_SRC/somenergia-generationkwh/scripts/genkwh_mtc.py curve production {meter} --by {aggregation} -o {output}
      parameters:
        meter:
          description: Número de serie del comptador
          type: enum
          options:
            Totes: ''
            Fontivsolar: 501815908
            Alcolea: 501600324
            Matallana: 68308479
        aggregation:
          description: Agregació
          type: enum
          options:
            Diariament: day
            Mensualment: month
            Hora a hora diariament: dayhour
            Hora a hora mensualment: monthhour
          default: dayhour
        output:
          type: FILEDOWN
          extension: csv
          filename: production-{meter}.csv

    rightsCurve:
      title: Corbes de drets per a un perfil d'inversió
      description: >
        Genera corba de drets generats per a un perfil d'inversor amb un nombre d'accions determinat
      script: python SOME_SRC/somenergia-generationkwh/scripts/genkwh_mtc.py curve rightspershare {nshares} --by {aggregation} -o {output}
      parameters:
        nshares:
          description: Número d'accions
        aggregation:
          description: Agregació
          type: enum
          options:
            Diariament: day
            Mensualment: month
            Hora a hora diariament: dayhour
            Hora a hora mensualment: monthhour
          default: dayhour
        output:
          type: FILEDOWN
          extension: csv
          filename: rightspershare-{nshares}.csv

    corbesUsPerSoci:
      title: Corbes dels GkWh emprats
      description: >
        Genera corba de drets gastats d'un inversor del GenerationkWh
      script: python SOME_SRC/somenergia-generationkwh/scripts/genkwh_mtc.py curve memberrightusage {member} --idmethod {idmethod} --by {aggregation} -o {output}
      parameters:
        idmethod:
          description: Com identifiquem l'usuari
          type: enum
          options:
            Pel codi de soci (SXXXXXX): code
            Pel NIF: vat
            Per l'id fitxa de client: partner
            Per l'id fitxa de soci: member
          default: member
        member:
          description: Identificació. Deixa en blanc per veure la suma de tots els socis.
        aggregation:
          description: Agregació
          type: enum
          options:
            Diariament: day
            Mensualment: month
            Hora a hora diariament: dayhour
            Hora a hora mensualment: monthhour
          default: dayhour
        output:
          type: FILEDOWN
          extension: csv
          filename: usage-{member}.csv

    computeIntegral:
      title: Compute integral file
      description: >
         Genera los valores de la integral de un fichero
      script: python3 SOME_SRC/somenergia-generationkwh/scripts/integral_batch_file.py {ncolumna} {fitxerMesures} {fitxerSortida} {decimal} {separador}
      parameters:
        ncolumna:
          description: Número de columna a integrar (començant en 0)
          default: 1
        fitxerMesures:
          description: fichero csv, xls o xlsx con los datos para integrar
          type: FILE
        fitxerSortida:
          type: FILEDOWN
          extension: csv
          filename: outputFileIntegrated_{ncolumna}_col.csv
        decimal:
          description: Tipus de coma decimal dels numeros
          type: enum
          options:
            Punt: '.'
            Coma: ','
            Irrellevant: '.'
        separador:
          description: Tipus de separador de valors del csv d'entrada i/o sortida
          type: enum
          options:
            PuntComa: ';'
            Coma: ','
            Espai: ' '
            Irrellevant: ';'


# vim: et ts=2 sw=2
